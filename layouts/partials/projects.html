{{ if isset .Site.Params "projects" }}
{{ if .Site.Params.projects.enable }}
{{ if gt (len .Site.Data.projects) 0 }}
<section class="bar background-white">
    <div class="row">
        <div class="col-md-12">
            <div class="heading text-center">
                <h2>{{ .Site.Params.projects.title }}</h2>
                <br>
                <br>
                <p class="lead">
                    {{ .Site.Params.projects.subtitle | markdownify }}
                </p>
            </div>
        </div>
    </div>
    <div class="container">
        {{ range $index, $element := sort .Site.Data.projects "weight" }}
        {{ if eq (mod $index 3) 0 }}
        <div class="col-md-12">
            <div class="row">
        {{ end }}
                <div class="col-md-4">
                    <div class="box-simple">
                        {{ with $element.url }}
                        <a href="{{ $element.url }}">
                        {{ end }}
                            <div class="icon">
                                <i class="{{ .icon }}"></i>
                            </div>
                        {{ with $element.url }}
                        </a>
                        {{ end }}
                        <h3>{{ $element.name | markdownify }}</h3>
                        <p>{{ $element.description | markdownify }}</p>
                    </div>
                </div>
        {{ if or (eq (mod $index 3) 2) (eq $index (sub (len $.Site.Data.projects) 1 )) }}
            </div>
        </div>
        {{ end }}
        {{ end }}
    </div>
</section>
{{ end }}
{{ end }}
{{ end }}
